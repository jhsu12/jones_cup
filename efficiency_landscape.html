<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Offensive and Defensive Rating Comparison</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f8f9fa;
        }
        
        .chart-container {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 30px;
            max-width: 900px;
            margin: 0 auto;
        }
        
        .chart-title {
            text-align: center;
            font-size: 24px;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }
        
        .chart-subtitle {
            text-align: center;
            font-size: 14px;
            color: #666;
            margin-bottom: 30px;
        }
        
        .axis-label {
            font-size: 14px;
            font-weight: 600;
            fill: #333;
        }
        
        .quadrant-label {
            font-size: 12px;
            font-weight: 600;
            fill: #666;
        }
        
        .team-circle {
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .team-circle:hover {
            stroke: #333;
            stroke-width: 3;
        }
        
        .tooltip {
            position: absolute;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 10px;
            border-radius: 5px;
            font-size: 12px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .grid-line {
            stroke: #e0e0e0;
            stroke-dasharray: 3,3;
            stroke-width: 1;
        }
        
        .axis {
            stroke: #333;
            stroke-width: 2;
        }
        
        .average-line {
            stroke: #999;
            stroke-dasharray: 5,5;
            stroke-width: 1.5;
        }
    </style>
</head>
<body>
    <div class="chart-container">
        <div class="chart-title">Offensive and Defensive Rating Comparison</div>
        <div class="chart-subtitle">(Sample Teams Data)</div>
        <div id="chart"></div>
        <div class="tooltip" id="tooltip"></div>
    </div>

    <script>
        // Sample data for 5 teams
        const teams = [
            { name: "Warriors", offense: 120.2, defense: 113.8, color: "#FDB927" },
            { name: "Clippers", offense: 112.3, defense: 103.5, color: "#C8102E" },
            { name: "Thunder", offense: 111.1, defense: 99.2, color: "#007AC1" },
            { name: "Celtics", offense: 108.9, defense: 98.5, color: "#007A33" },
            { name: "Lakers", offense: 99.2, defense: 103.1, color: "#552583" }
        ];

        // Set up dimensions and margins
        const margin = { top: 40, right: 80, bottom: 80, left: 80 };
        const width = 800 - margin.left - margin.right;
        const height = 600 - margin.top - margin.bottom;

        // Create SVG
        const svg = d3.select("#chart")
            .append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom);

        const g = svg.append("g")
            .attr("transform", `translate(${margin.left},${margin.top})`);

        // Set up scales
        const xScale = d3.scaleLinear()
            .domain([95, 115])
            .range([0, width]);

        const yScale = d3.scaleLinear()
            .domain([95, 125])
            .range([height, 0]);

        // Average lines (approximately based on typical NBA averages)
        const avgOffense = 107;
        const avgDefense = 107;

        // Add grid lines
        const xGridLines = d3.axisBottom(xScale)
            .tickSize(-height)
            .tickFormat("");

        const yGridLines = d3.axisLeft(yScale)
            .tickSize(-width)
            .tickFormat("");

        g.append("g")
            .attr("class", "grid")
            .attr("transform", `translate(0,${height})`)
            .call(xGridLines)
            .selectAll("line")
            .attr("class", "grid-line");

        g.append("g")
            .attr("class", "grid")
            .call(yGridLines)
            .selectAll("line")
            .attr("class", "grid-line");

        // Add average lines
        g.append("line")
            .attr("class", "average-line")
            .attr("x1", 0)
            .attr("x2", width)
            .attr("y1", yScale(avgOffense))
            .attr("y2", yScale(avgOffense));

        g.append("line")
            .attr("class", "average-line")
            .attr("x1", xScale(avgDefense))
            .attr("x2", xScale(avgDefense))
            .attr("y1", 0)
            .attr("y2", height);

        // Add axes
        g.append("g")
            .attr("class", "axis")
            .attr("transform", `translate(0,${height})`)
            .call(d3.axisBottom(xScale));

        g.append("g")
            .attr("class", "axis")
            .call(d3.axisLeft(yScale));

        // Add axis labels
        g.append("text")
            .attr("class", "axis-label")
            .attr("transform", `translate(${width/2}, ${height + 50})`)
            .style("text-anchor", "middle")
            .text("Defensive Rating");

        g.append("text")
            .attr("class", "axis-label")
            .attr("transform", "rotate(-90)")
            .attr("y", -50)
            .attr("x", -height/2)
            .style("text-anchor", "middle")
            .text("Offensive Rating");

        // Add quadrant labels
        g.append("text")
            .attr("class", "quadrant-label")
            .attr("x", 20)
            .attr("y", 20)
            .text("Good Offense")
            .append("tspan")
            .attr("x", 20)
            .attr("dy", "1.2em")
            .text("Bad Defense");

        g.append("text")
            .attr("class", "quadrant-label")
            .attr("x", width - 80)
            .attr("y", 20)
            .text("Good Offense")
            .append("tspan")
            .attr("x", width - 80)
            .attr("dy", "1.2em")
            .text("Good Defense");

        g.append("text")
            .attr("class", "quadrant-label")
            .attr("x", 20)
            .attr("y", height - 20)
            .text("Bad Offense")
            .append("tspan")
            .attr("x", 20)
            .attr("dy", "1.2em")
            .text("Bad Defense");

        g.append("text")
            .attr("class", "quadrant-label")
            .attr("x", width - 80)
            .attr("y", height - 20)
            .text("Bad Offense")
            .append("tspan")
            .attr("x", width - 80)
            .attr("dy", "1.2em")
            .text("Good Defense");

        // Create tooltip
        const tooltip = d3.select("#tooltip");

        // Add team circles
        g.selectAll(".team-circle")
            .data(teams)
            .enter()
            .append("circle")
            .attr("class", "team-circle")
            .attr("cx", d => xScale(d.defense))
            .attr("cy", d => yScale(d.offense))
            .attr("r", 15)
            .attr("fill", d => d.color)
            .attr("stroke", "#fff")
            .attr("stroke-width", 2)
            .on("mouseover", function(event, d) {
                // Highlight the circle
                d3.select(this)
                    .transition()
                    .duration(200)
                    .attr("r", 18);

                // Show tooltip
                tooltip
                    .style("opacity", 1)
                    .html(`
                        <strong>${d.name}</strong><br/>
                        Offensive Rating: ${d.offense}<br/>
                        Defensive Rating: ${d.defense}
                    `)
                    .style("left", (event.pageX + 10) + "px")
                    .style("top", (event.pageY - 10) + "px");
            })
            .on("mouseout", function(event, d) {
                // Reset circle size
                d3.select(this)
                    .transition()
                    .duration(200)
                    .attr("r", 15);

                // Hide tooltip
                tooltip.style("opacity", 0);
            });

        // Add team name labels
        g.selectAll(".team-label")
            .data(teams)
            .enter()
            .append("text")
            .attr("class", "team-label")
            .attr("x", d => xScale(d.defense))
            .attr("y", d => yScale(d.offense) + 25)
            .attr("text-anchor", "middle")
            .style("font-size", "11px")
            .style("font-weight", "600")
            .style("fill", "#333")
            .text(d => d.name);

        // Add average labels
        g.append("text")
            .attr("x", width + 10)
            .attr("y", yScale(avgOffense) + 5)
            .style("font-size", "10px")
            .style("fill", "#666")
            .text("平均值");

        g.append("text")
            .attr("x", xScale(avgDefense) - 15)
            .attr("y", -10)
            .style("font-size", "10px")
            .style("fill", "#666")
            .text("平均值");
    </script>
</body>
</html>